<!DOCTYPE html><html lang="zh-cn"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=Edge"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no"><meta name="format-detection" content="telephone=no"><meta name="format-detection" content="email=no"><meta name="description"><meta name="keywords" content="iOS, Objective-C, Swift"><title>å¯ä»¥æ»šåŠ¨æ˜¾ç¤ºçš„Label - yuejieee's Blog</title><link rel="stylesheet" href="/css/main_style.min.css"><link rel="icon" href="/favicon.ico"></head><body><input id="navi" type="checkbox"><ul class="main-navication"><li><a href="/"><span>Home</span></a></li><li><a href="https://github.com/yuejieee"><span>Github</span></a></li><li><a href="http://weibo.com/u/3645434183"><span>Weibo</span></a></li><li><a href="http://cn.engadget.com/"><span>Engadget</span></a></li></ul><div class="wrapper" id="wrap"><div class="post-header"><label class="navi-button light" for="navi">MENU</label><img class="background" src="http://callfiles.ueibo.com/hexo-theme-laughing/post_background.jpg"><div class="post-title"><h1 class="title">å¯ä»¥æ»šåŠ¨æ˜¾ç¤ºçš„Label</h1><ul class="meta"><li><i class="icon icon-author"></i>yuejieee</li><li><i class="icon icon-clock"></i>7 Minutes</li><li><i class="icon icon-calendar"></i>May 4, 2017</li></ul></div></div><div class="article-content" style="max-width:800px"><h3 id="å†™åœ¨å¼€å§‹"><a href="#å†™åœ¨å¼€å§‹" class="headerlink" title="å†™åœ¨å¼€å§‹"></a>å†™åœ¨å¼€å§‹</h3><p>åœ¨é¡¹ç›®å¼€å‘ä¸­ç»å¸¸é‡åˆ°éœ€è¦å±•ç¤ºå­—ç¬¦ä¸²è¿‡é•¿ï¼Œä½†labelå¸ƒå±€åªå…è®¸æ˜¾ç¤ºä¸€è¡Œçš„æƒ…å†µï¼Œè¿™æ—¶å¦‚æœä»…ä»…ä½¿ç”¨UILabelï¼Œä½¿å¾—å­—ç¬¦ä¸²æ— æ³•å®Œæ•´æ˜¾ç¤ºã€‚äºæ˜¯å°±èŒç”Ÿäº†å†™ä¸€ä¸ªå¯ä»¥æ»šåŠ¨æ˜¾ç¤ºå­—ç¬¦ä¸²labelçš„å¿µå¤´ã€‚<br><a id="more"></a></p>
<h3 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h3><p>å¼€å§‹å†™ä¹‹å‰æƒ³äº†å‡ ç§æ–¹æ¡ˆï¼Œæœ€åç¡®å®šäº†å°†labelæ”¾åœ¨scrollViewçš„æ–¹æ³•æ¥å®ç°ã€‚<br>å…·ä½“æ€è·¯åŸºæœ¬å°±æ˜¯è®©labelé€šè¿‡sizeToFit()æ ¹æ®å†…å®¹è°ƒèŠ‚sizeï¼Œä½¿scrollViewæ ¹æ®labelçš„sizeè®¾ç½®contentSizeï¼Œå‰©ä¸‹çš„å°±æ˜¯é€šè¿‡åŠ¨ç”»æ¥è°ƒæ•´scrollViewçš„contentOffsetå°±å¯ä»¥äº†ã€‚</p>
<h3 id="åŸºæœ¬å®ç°"><a href="#åŸºæœ¬å®ç°" class="headerlink" title="åŸºæœ¬å®ç°"></a>åŸºæœ¬å®ç°</h3><ul>
<li>åˆ›å»ºä¸€ä¸ªç»§æ‰¿äºUIViewçš„ç±»ï¼Œå£°æ˜å‡ ä¸ªå˜é‡ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">private var scrollView: UIScrollView!</div><div class="line">private var contentLabel: UILabel!</div><div class="line">public var scrollInterval: Double = 10  // scrollInterval: defualt 10s</div></pre></td></tr></table></figure>
</li>
</ul>
<p>å…¶ä¸­scrollViewç”¨æ¥åšlabelçš„çˆ¶è§†å›¾ï¼Œè´Ÿè´£æ»šåŠ¨ã€‚</p>
<ul>
<li>åˆå§‹åŒ–è§†å›¾å˜é‡ï¼š<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">private func setupSubviews(_ frame: CGRect) &#123;</div><div class="line">    self.scrollView = UIScrollView()</div><div class="line">    self.addSubview(self.scrollView)</div><div class="line">    self.scrollView.frame = frame</div><div class="line">    self.scrollView.isScrollEnabled = false</div><div class="line"></div><div class="line">    self.contentLabel = UILabel()</div><div class="line">    self.contentLabel.frame = frame</div><div class="line">    self.scrollView.addSubview(self.contentLabel)</div><div class="line">    self.contentLabel.textColor = UIColor.black</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>æ‰€æœ‰è§†å›¾sizeéƒ½ç­‰äºè¯¥UIViewå­ç±»çš„size</p>
<ul>
<li>è®¾ç½®scrollViewçš„contentSize:<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">override public func layoutSubviews() &#123;</div><div class="line">    super.layoutSubviews()</div><div class="line"></div><div class="line">    self.scrollView.frame = self.bounds</div><div class="line">    self.scrollView.contentSize = CGSize.init(width: self.contentLabel.frame.size.width, height: 0)</div><div class="line"></div><div class="line">    self.contentLabel.center = CGPoint.init(x: self.contentLabel.frame.size.width / 2, y: self.scrollView.center.y)</div><div class="line">    if self.contentLabel.frame.size.width &gt; self.scrollView.frame.size.width &#123;</div><div class="line">        self.setAnimate()</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>å› ä¸ºcontentSizeè¦æ ¹æ®labelçš„å†…å®¹å’Œsizeæ¥ç¡®å®šï¼Œä¸ºäº†é¿å…è®¾ç½®contentSizeæ—¶labelè¿˜æ²¡è¢«èµ‹å€¼çš„æƒ…å†µï¼Œæ‰€ä»¥å°†è¿™éƒ¨åˆ†å†™åœ¨layoutSubviews()ä¸­ã€‚</p>
<ul>
<li><p>å®ç°æ»šåŠ¨åŠ¨ç”»æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">private func setAnimate() &#123;</div><div class="line">    let offsetX = self.scrollView.contentOffset.x</div><div class="line">    let labelW = self.contentLabel.frame.size.width</div><div class="line">    let scrollW = self.scrollView.frame.size.width</div><div class="line"></div><div class="line">    if offsetX == 0 &#123;</div><div class="line">        UIView.animate(withDuration: self.scrollInterval, animations: &#123;</div><div class="line">            self.scrollView.contentOffset = CGPoint.init(x: labelW - scrollW, y: 0)</div><div class="line">        &#125;) &#123; (finish) in</div><div class="line">            if finish &#123;</div><div class="line">                self.setAnimate()</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125; else &#123;</div><div class="line">        UIView.animate(withDuration: self.scrollInterval, animations: &#123;</div><div class="line">            self.scrollView.contentOffset = CGPoint.init(x: 0, y: 0)</div><div class="line">        &#125;) &#123; (finish) in</div><div class="line">            if finish &#123;</div><div class="line">                self.setAnimate()</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
<li><p>å®šä¹‰æš´éœ²ç»™å¼€å‘è€…çš„æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">/*</div><div class="line"> * title: labelå†…å®¹</div><div class="line"> * alignment: æ–‡å­—å¯¹é½æ–¹å¼</div><div class="line"> * font: å­—ä½“å¤§å°</div><div class="line"> */</div><div class="line">public func setTitle(_ title: NSString, _ color: UIColor = UIColor.black, _ alignment: NSTextAlignment = .left, _ font: UIFont = UIFont.systemFont(ofSize: 15)) &#123;</div><div class="line">    self.contentLabel.text = title as String</div><div class="line">    self.contentLabel.textAlignment = alignment</div><div class="line">    self.contentLabel.font = font</div><div class="line">    self.contentLabel.textColor = color</div><div class="line">    self.contentLabel.sizeToFit()</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="æœ€å"><a href="#æœ€å" class="headerlink" title="æœ€å"></a>æœ€å</h3><p>ç”±äºæ˜¯åœ¨æ¯”è¾ƒçŸ­çš„æ—¶é—´å†…å†™çš„ï¼ŒåŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œä½†ä¹ŸåŸºæœ¬èƒ½æ»¡è¶³éœ€æ±‚ï¼ŒåæœŸå¯èƒ½ä¼šä½¿æ‰©å±•æ€§æ›´å¤§ä¸€ç‚¹ï¼Œæƒ³çœ‹Demoçš„ä¹Ÿå¯ä»¥å»æˆ‘çš„githubæŸ¥çœ‹æºç ã€‚</p>
<blockquote>
<p>é¡¹ç›®é“¾æ¥: <a href="https://github.com/yuejieee/YJScrollLabel" target="_blank" rel="external">https://github.com/yuejieee/YJScrollLabel</a><br> è®°å¾—å¸®starä¸€ä¸‹ğŸ˜„</p>
</blockquote>
</div><div class="article-meta" style="max-width:800px"><div class="categories"><i class="icon icon-category"></i><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Swift/">Swift</a><span class="category-list-count">2</span></li></ul></div></div><ul class="navication"><li class="home"><a href="/"><i class="icon icon-home"></i></a></li><li><a href="/2017/04/25/æ–°æ‰‹å…»çŒ«æ³¨æ„äº‹é¡¹/"><i class="icon icon-arror-left"></i></a></li></ul><div class="page-footer"><div class="top"><ul class="social"><li><a href="https://github.com/yuejieee" title="Github" target="_blank"><i class="icon icon-github"></i></a></li><li><a href="http://weibo.com/u/3645434183" title="Weibo" target="_blank"><i class="icon icon-weibo"></i></a></li><li><a href="http://oltlcmelj.bkt.clouddn.com/WechatQRCode.jpeg" title="Wechat" target="_blank"><i class="icon icon-wechat"></i></a></li><li><a href="mailto:yuejieee@gmail.com" title="Email" target="_blank"><i class="icon icon-email"></i></a></li></ul></div><div class="bottom"><p class="copyright">Â© 2017 yuejieee's Blog<br><small>POWER BY <a href="https://hexo.io" target="_blank">HEXO</a></small><small>, THEME BY <a href="https://github.com/BoizZ/hexo-theme-laughing" target="_blank">LAUGHING</a></small></p></div></div></div><script>var wrap = document.getElementById('wrap');
window.onload = function () {
  wrap.className += ' done';
}</script></body></html>